<!DOCTYPE html>
<html lang="vi">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>Gate 7 Coffee Roastery - Blog Article</title>
    <meta name="description" content="Read articles from Gate 7 Coffee Roastery blog"/>
    <meta name="keywords" content="Gate 7 Coffee Roastery, blog, articles, coffee"/>
    <meta name="msapplication-TileColor" content="#201F20"/>
    <meta name="mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
    <meta name="author" content="Giang Nguyen"/>
    <meta name="theme-color" content="#201F20"/>
    <meta name="facebook-domain-verification" content="2mxb7nafe59vwgci0xk3apflvi35zi" />
    
    <!-- Open Graph Tags -->
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Gate 7 Coffee Roastery - Blog"/>
    <meta property="og:description" content="Read articles from Gate 7 Coffee Roastery"/>
    <meta property="og:image" content="/images/logo-only-black.webp"/>
    <meta property="og:image:alt" content="Logo Gate 7 Coffee Roastery"/>
    <meta property="og:url" content="https://gate7.vn/blog/article/"/>
    <meta property="og:site_name" content="Gate 7 Coffee Roastery"/>
    <meta property="og:locale" content="vi_VN"/>
    <meta property="og:locale:alternate" content="en_US"/>
    
    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:title" content="Gate 7 Coffee Roastery - Blog Article"/>
    <meta name="twitter:description" content="Read articles from Gate 7 Coffee Roastery"/>
    <meta name="twitter:image" content="/images/logo-only-black.webp"/>
    <meta name="twitter:creator" content="@gate7coffee"/>
    
    <link rel="icon" type="image/webp" href="/images/logo-only-black-favicon.webp"/>
    <link rel="apple-touch-icon" href="/images/logo-only-black-apple.webp"/>
    
    <!-- Performance: Preload critical image resources -->
    <link rel="preload" as="image" href="/images/logo-color-black-bg1-large.webp" fetchpriority="high"/>
    
    <!-- Performance: Preload critical fonts -->
    <link rel="preload" as="font" href="/css/Averta/Averta-Regular.otf" type="font/otf" crossorigin/>
    <link rel="preload" as="font" href="/css/Averta/Averta-Bold.otf" type="font/otf" crossorigin/>
    
    <!-- Performance: DNS Prefetch & Preconnect -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com"/>
    <link rel="dns-prefetch" href="https://www.googletagmanager.com"/>
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    
    <!-- Critical styles -->
    <link rel="stylesheet" href="/css/style-gate7.css"/>
    <link rel="stylesheet" href="/css/style-blog.css"/>
    
    <!-- Web Vitals Performance Monitoring -->
    <script>
    // Core Web Vitals tracking
    window.webVitalsMetrics = {};
    
    // Largest Contentful Paint (LCP)
    const lcpObserver = new PerformanceObserver((list) => {
        const entries = list.getEntries();
        const lastEntry = entries[entries.length - 1];
        window.webVitalsMetrics.lcp = lastEntry.renderTime || lastEntry.loadTime;
    });
    
    try {
        lcpObserver.observe({type: 'largest-contentful-paint', buffered: true});
    } catch (e) {}
    
    // Cumulative Layout Shift (CLS)
    let clsValue = 0;
    const clsObserver = new PerformanceObserver((list) => {
        for (const entry of list.getEntries()) {
            if (!entry.hadRecentInput) {
                clsValue += entry.value;
                window.webVitalsMetrics.cls = clsValue;
            }
        }
    });
    
    try {
        clsObserver.observe({type: 'layout-shift', buffered: true});
    } catch (e) {}
    </script>
</head>
<body>
    <!-- Header: Display only when scrollY > 50 -->
    <header class="header">
        <div class="logo-header">
            <img src="/images/logo-color-black-bg1.webp" alt="Gate 7 Coffee Roastery Logo" width="400" height="300" fetchpriority="high"/>
        </div>
    
        <div class="language-switcher-header">
            <button class="lang-btn" data-lang="en">EN</button>
            <span>|</span>
            <button class="lang-btn active" data-lang="vn">VN</button>
        </div>
    </header>

    <div class="container">
        <div class="content">
            <!-- Article View Page -->
            <div class="article-view active" id="articlePage">
                <div class="article-header">
                    <a href="/blog/" class="back-btn">← Back</a>
                    <div style="flex: 1;">
                        <h1 class="article-title" id="viewTitle"></h1>
                        <p class="article-meta" id="viewDate"></p>
                    </div>
                </div>
                <div class="article-content" id="articleContent"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div>
                <h4 data-en="Address" data-vn="Địa Chỉ">Địa Chỉ</h4>
                <p>162A Nguyễn Trường Tộ<br/>Phường Phú Thọ Hòa, TP HCM</p>
                <p>hello@gate7.vn<br/>(+84) 0971-091-120</p>
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.237932965956!2d106.63045397428787!3d10.793080158887879!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x317529a8b3819463%3A0x5aec4a7508322c9d!2sGate%207%20Coffee%20Roastery!5e0!3m2!1sen!2s!4v1758699078419!5m2!1sen!2s" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
            <div>
                <h4 data-en="Hours" data-vn="Khung Giờ">Khung Giờ</h4>
                <div class="hours">
                    <span data-en="Monday – Friday" data-vn="Thứ Hai – Thứ Sáu">Thứ Hai – Thứ Sáu</span><span data-en="7:00 AM – 9:00 PM" data-vn="7:00 sáng – 21:00">7:00 sáng – 21:00</span>
                    <span data-en="Saturday – Sunday" data-vn="Thứ Bảy – Chủ Nhật">Thứ Bảy – Chủ Nhật</span><span data-en="7:00 AM – 10:00 PM" data-vn="7:00 sáng – 22:00">7:00 sáng – 22:00</span>
                </div>
            </div>
            <div>
            <h4 data-en="Follow" data-vn="Theo Dõi Gate Tại">Theo Dõi Gate Tại</h4>
            <div class="social-links">
            <a href="https://instagram.com/gate7.coffee" target="_blank" rel="noopener noreferrer">
            <img src="/images/social-icon-instagram.webp" alt="Instagram" loading="lazy"> Instagram
             </a>
             <a href="https://www.facebook.com/share/1CnRHZ9QSz/?mibextid=wwXIfr" target="_blank" rel="noopener noreferrer">
             <img src="/images/social-icon-facebook.webp" alt="Facebook" loading="lazy"> Facebook
             </a>
             <a href="https://zalo.me/2485475799709134069" target="_blank" rel="noopener noreferrer">
             <img src="/images/social-icon-zalo.webp" alt="Zalo" loading="lazy"> Zalo
            </a>
            </div>
            </div>

        </div>
        <div class="footer-bottom">
            <span data-en="© 2025 Gate 7 Coffee Roastery. All rights reserved." data-vn="© 2025 Gate 7 Coffee Roastery. Tất cả quyền được bảo lưu.">© 2025 Gate 7 Coffee Roastery. Tất cả quyền được bảo lưu.</span>
            <div class="language-switcher">
                <button class="lang-btn" data-lang="en">EN</button>
                <span>|</span>
                <button class="lang-btn active" data-lang="vn">VN</button>
            </div>
        </div>
        </footer>

    <!-- Critical scripts (inline for immediate execution) -->
    <script>
        // Smooth scroll behavior (critical for UX)
        document.documentElement.style.scrollBehavior = 'smooth';
        
        // Disable pinch-to-zoom on touch devices
        document.addEventListener('touchmove', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // Disable zoom with keyboard shortcuts (Ctrl/Cmd +, Ctrl/Cmd -, Ctrl/Cmd 0)
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && (e.key === '+' || e.key === '-' || e.key === '0' || e.key === '=')) {
                e.preventDefault();
            }
        });
        
        // Disable mouse wheel zoom (Ctrl/Cmd + scroll)
        document.addEventListener('wheel', function(e) {
            if (e.ctrlKey || e.metaKey) {
                e.preventDefault();
            }
        }, { passive: false });

        // Scroll animations - Can be deferred
        document.addEventListener('DOMContentLoaded', function() {
            let isCompacted = false;

            // Check if portrait mode
            function isPortraitMode() {
                return window.innerHeight > window.innerWidth;
            }

            // Scroll indicator fade out + main section compact and pin
            let transitioning = false;
            
            window.addEventListener('scroll', function() {
                const scrollY = window.scrollY;
                const threshold = 27; // Scroll distance before compact

                // Display Header and Hide the Main only in the portrait mode
                if (isPortraitMode() && !transitioning) {
                    const shouldCompact = scrollY > threshold;
                    
                    if (shouldCompact !== isCompacted) {
                        transitioning = true;
                        isCompacted = shouldCompact;
                        document.querySelector('.header').style.display = shouldCompact ? 'flex' : 'none';                        
                        requestAnimationFrame(() => {
                            transitioning = false;
                        });
                    }
                }
            });

            // Intersection Observer for scroll animations
            const observerOptions = {
                threshold: 0,
                rootMargin: '3px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                        // Don't unobserve - keep observing to maintain state
                    }
                });
            }, observerOptions);

            // Observe elements that should animate on scroll
            const animateElements = document.querySelectorAll('.container, .footer');
            animateElements.forEach(el => {
                observer.observe(el);
            });

            // Recalculate scroll animations on window resize
            window.addEventListener('resize', function() {
                // Trigger scroll event to recalculate animations based on new viewport dimensions
                window.dispatchEvent(new Event('scroll'));
            });
        });

        // Load article when page loads
        document.addEventListener('DOMContentLoaded', async function() {
            // Get gist ID from sessionStorage (set by blog.js when navigating from listing)
            let gistId = sessionStorage.getItem('gistId');
            
            if (gistId) {
                // Clear sessionStorage after retrieving
                sessionStorage.removeItem('gistId');
                // Load the article
                await loadArticleFromGist(gistId);
            } else {
                // Check if slug is in URL (direct visit)
                const urlParams = new URLSearchParams(window.location.search);
                const slug = urlParams.get('slug');
                
                if (slug) {
                    // Find gist by slug
                    const foundGistId = await findGistBySlug(slug);
                    if (foundGistId) {
                        // Update URL to use the slug path for SEO
                        window.history.replaceState(null, '', `/blog/article/?slug=${slug}`);
                        await loadArticleFromGist(foundGistId);
                    } else {
                        // No article found for this slug
                        document.getElementById('articleContent').innerHTML = '<p>Article not found.</p>';
                    }
                } else {
                    // No gist ID or slug found, redirect to blog listing
                    window.location.href = '/blog/';
                }
            }
        });


    </script>

    <!-- Load deferred scripts -->
    <script defer src="/js/blog.js"></script>
    <script defer src="/js/language-switcher.js"></script>
</body>
</html>
